<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Version 5.0 - Updated: Feb 9, 2026 - Research-Based Recommendations -->
    <meta name="color-scheme" content="light">
    <meta name="theme-color" content="#367C2B">
    <meta name="description" content="Your lawn care made simple - track, plan, and achieve the perfect green lawn">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Lawn Coach">
    <title>Lawn Coach - DIY Lawn Care Tracking</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-white" style="background-color: #ffffff !important;">
    <style>
        body::before,
        body > *:not(#root):not(script) {
            display: none !important;
        }
        #root {
            min-height: 100vh;
        }
    </style>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Comprehensive Product Database - Top lawn care products from major retailers
        const PRODUCT_DATABASE = {
            mowers: [
                { id: 'm-other', name: 'Other (Specify)', brand: 'Other', type: 'Custom', deck: '', features: '', maintenanceSchedule: { oilChange: null, note: 'Custom mower - set your own maintenance schedule' } },
                { id: 'm6', name: 'Craftsman M215', brand: 'Craftsman', type: 'Gas Push', deck: '21"', features: 'Briggs & Stratton, Side Discharge', maintenanceSchedule: { oilChange: 50, airFilter: 'yearly', sparkPlug: 100 } },
                { id: 'm3', name: 'EGO Power+ LM2142SP', brand: 'EGO', type: 'Battery Self-Propelled', deck: '21"', features: '56V, LED Headlights', maintenanceSchedule: { oilChange: null, note: 'Battery-powered - no oil changes needed' } },
                { id: 'm4', name: 'Greenworks 25223', brand: 'Greenworks', type: 'Corded Electric', deck: '20"', features: '12 Amp, 3-in-1', maintenanceSchedule: { oilChange: null, note: 'Electric - no oil changes needed' } },
                { id: 'm1', name: 'Honda HRX217VKA', brand: 'Honda', type: 'Gas Self-Propelled', deck: '21"', features: 'Variable Speed, Versamow', maintenanceSchedule: { oilChange: 50, airFilter: 50, sparkPlug: 100, note: 'Every 25 hours under heavy load' } },
                { id: 'm5', name: 'Husqvarna LC221RH', brand: 'Husqvarna', type: 'Gas Self-Propelled', deck: '21"', features: 'Honda Engine, High Wheels', maintenanceSchedule: { oilChange: 50, airFilter: 50, sparkPlug: 100 } },
                { id: 'm8', name: 'John Deere JS46', brand: 'John Deere', type: 'Gas Self-Propelled', deck: '22"', features: 'Rear Wheel Drive, 190cc', maintenanceSchedule: { oilChange: 50, airFilter: 50, sparkPlug: 100 } },
                { id: 'm9', name: 'Makita XML08Z', brand: 'Makita', type: 'Battery Self-Propelled', deck: '21"', features: '36V x4, Commercial Grade', maintenanceSchedule: { oilChange: null, note: 'Battery-powered - no oil changes needed' } },
                { id: 'm7', name: 'Ryobi 40V RY40190', brand: 'Ryobi', type: 'Battery Push', deck: '20"', features: '40V Lithium, Brushless', maintenanceSchedule: { oilChange: null, note: 'Battery-powered - no oil changes needed' } },
                { id: 'm2', name: 'Toro Recycler 22"', brand: 'Toro', type: 'Gas Self-Propelled', deck: '22"', features: 'Personal Pace, SmartStow', maintenanceSchedule: { oilChange: 50, airFilter: 'yearly', sparkPlug: 'yearly' } },
                { id: 'm11', name: 'Toro TimeMaster 30"', brand: 'Toro', type: 'Gas Self-Propelled', deck: '30"', features: 'Dual-Force Cutting, Personal Pace', maintenanceSchedule: { oilChange: 50, airFilter: 'yearly', sparkPlug: 'yearly', bladeService: 'yearly' } },
                { id: 'm10', name: 'Troy-Bilt TB330', brand: 'Troy-Bilt', type: 'Gas Self-Propelled', deck: '21"', features: 'TriAction Cutting, 163cc', maintenanceSchedule: { oilChange: 50, airFilter: 'yearly', sparkPlug: 100 } }
            ],
            spreaders: [
                { id: 'sp1', name: 'Echo RB-60 Spreader', brand: 'Echo', type: 'Broadcast', capacity: '60 lbs', features: 'Edge Guard, Pneumatic Tires', maintenanceSchedule: { cleaning: 'after each use', tires: 'check pressure 15 psi', note: 'Maintenance-free gear case' } },
                { id: 'sp2', name: 'Scotts Elite Spreader', brand: 'Scotts', type: 'Broadcast', capacity: '20000 sq ft', features: 'EdgeGuard, Never Flat Tires', maintenanceSchedule: { cleaning: 'after each use', note: 'No lubrication required' } },
                { id: 'sp3', name: 'Earthway 2150', brand: 'Earthway', type: 'Broadcast', capacity: '50 lbs', features: 'Commercial Grade, EV-N-Spred', maintenanceSchedule: { cleaning: 'after each use', lubrication: 'seasonal' } },
                { id: 'sp4', name: 'Agri-Fab 45-0463', brand: 'Agri-Fab', type: 'Tow-Behind', capacity: '130 lbs', features: 'Universal Hitch, Pneumatic Tires', maintenanceSchedule: { cleaning: 'after each use', lubrication: 'seasonal', tires: 'check pressure' } },
                { id: 'sp5', name: 'Chapin 8706A', brand: 'Chapin', type: 'Broadcast', capacity: '80 lbs', features: 'Auto-Stop, Baffle System', maintenanceSchedule: { cleaning: 'after each use', lubrication: 'before each season' } },
                { id: 'sp6', name: 'Scotts Wizz Hand-Held', brand: 'Scotts', type: 'Hand-Held', capacity: '2500 sq ft', features: 'Battery Powered, EdgeGuard', maintenanceSchedule: { cleaning: 'after each use', battery: 'charge as needed' } },
                { id: 'sp7', name: 'Lesco High Wheel', brand: 'Lesco', type: 'Broadcast', capacity: '80 lbs', features: 'Stainless Steel, Pro-Grade', maintenanceSchedule: { cleaning: 'after each use', lubrication: 'monthly during season' } },
                { id: 'sp8', name: 'Spyker P70-12010', brand: 'Spyker', type: 'Broadcast', capacity: '70 lbs', features: 'Enclosed Gears, Pro Series', maintenanceSchedule: { cleaning: 'after each use', gearbox: 'check oil annually' } },
                { id: 'sp9', name: 'Brinly BS36BH', brand: 'Brinly', type: 'Tow-Behind', capacity: '175 lbs', features: 'Pneumatic Tires, Heavy Duty', maintenanceSchedule: { cleaning: 'after each use', lubrication: 'seasonal', tires: 'check pressure' } },
                { id: 'sp10', name: 'Scotts Turf Builder EdgeGuard Mini', brand: 'Scotts', type: 'Broadcast', capacity: '5000 sq ft', features: 'Compact, EdgeGuard', maintenanceSchedule: { cleaning: 'after each use', note: 'Minimal maintenance' } }
            ],
            trimmers: [
                { id: 't-other', name: 'Other (Specify)', brand: 'Other', type: 'Custom', engineType: '', lineSize: '' },
                { id: 't1', name: 'Echo SRM-225', brand: 'Echo', type: 'Gas', engineType: 'Gas', lineSize: '.095"', features: '21.2cc, 2-Stroke' },
                { id: 't2', name: 'Stihl FS 56 RC-E', brand: 'Stihl', type: 'Gas', engineType: 'Gas', lineSize: '.105"', features: '27.2cc, Easy2Start' },
                { id: 't3', name: 'Husqvarna 128LD', brand: 'Husqvarna', type: 'Gas', engineType: 'Gas', lineSize: '.095"', features: '28cc, Detachable' },
                { id: 't4', name: 'EGO Power+ ST1521S', brand: 'EGO', type: 'Battery', engineType: 'Electric', lineSize: '.095"', features: '56V, Powerload' },
                { id: 't5', name: 'Makita XRU15Z', brand: 'Makita', type: 'Battery', engineType: 'Electric', lineSize: '.095"', features: '18V LXT' },
                { id: 't6', name: 'DeWalt DCST972X1', brand: 'DeWalt', type: 'Battery', engineType: 'Electric', lineSize: '.080"', features: '60V Max Flex' },
                { id: 't7', name: 'Ryobi RY40250', brand: 'Ryobi', type: 'Battery', engineType: 'Electric', lineSize: '.080"', features: '40V Brushless' },
                { id: 't8', name: 'Black+Decker LST136', brand: 'Black+Decker', type: 'Battery', engineType: 'Electric', lineSize: '.065"', features: '40V, Auto-Feed' },
                { id: 't9', name: 'Milwaukee 2825-21ST', brand: 'Milwaukee', type: 'Battery', engineType: 'Electric', lineSize: '.080"', features: 'M18 Fuel Quik-Lok' },
                { id: 't10', name: 'Craftsman CMXGTAMD25CC', brand: 'Craftsman', type: 'Gas', engineType: 'Gas', lineSize: '.095"', features: '25cc, 2-Cycle' }
            ],
            fertilizers: [
                { id: 'f1', name: 'Scotts Turf Builder Lawn Food', brand: 'Scotts', npk: '32-0-4', coverage: '15000 sq ft', type: 'Slow-Release Nitrogen' },
                { id: 'f2', name: 'Milorganite Organic Fertilizer', brand: 'Milorganite', npk: '6-4-0', coverage: '2500 sq ft', type: 'Organic, Slow-Release' },
                { id: 'f3', name: 'Jonathan Green Green-Up', brand: 'Jonathan Green', npk: '29-0-3', coverage: '15000 sq ft', type: 'Professional Grade' },
                { id: 'f4', name: 'Pennington UltraGreen', brand: 'Pennington', npk: '30-0-4', coverage: '12500 sq ft', type: 'Nitrogen Stabilized' },
                { id: 'f5', name: 'GreenView Fairway Formula', brand: 'GreenView', npk: '22-0-4', coverage: '15000 sq ft', type: 'Spring Booster' },
                { id: 'f6', name: 'Lesco Professional 24-0-11', brand: 'Lesco', npk: '24-0-11', coverage: '12500 sq ft', type: 'Balanced Formula' },
                { id: 'f7', name: 'Scotts Turf Builder EdgeGuard', brand: 'Scotts', npk: '38-0-6', coverage: '10000 sq ft', type: 'High Nitrogen' },
                { id: 'f8', name: 'Safer Brand Lawn Restore', brand: 'Safer Brand', npk: '9-0-2', coverage: '5000 sq ft', type: 'Organic, Pet-Safe' },
                { id: 'f9', name: 'Purely Organic Lawn Food', brand: 'Purely Organic', npk: '10-0-2', coverage: '2000 sq ft', type: 'OMRI Certified' },
                { id: 'f10', name: 'Sunday Smart Lawn Care', brand: 'Sunday', npk: '11-0-0', coverage: '5000 sq ft', type: 'Custom Blend, Organic' }
            ],
            seeds: [
                { id: 's1', name: 'Scotts Turf Builder Grass Seed', brand: 'Scotts', type: 'Sun & Shade Mix', coverage: '2800 sq ft', variety: 'Tall Fescue Blend' },
                { id: 's2', name: 'Pennington Smart Seed', brand: 'Pennington', type: 'Dense Shade', coverage: '1200 sq ft', variety: 'Fine Fescue Mix' },
                { id: 's3', name: 'Jonathan Green Black Beauty', brand: 'Jonathan Green', type: 'Ultra Mix', coverage: '5600 sq ft', variety: 'Tall Fescue' },
                { id: 's4', name: 'GCI Turf Type Tall Fescue', brand: 'GCI', type: 'Premium TTTF', coverage: '10000 sq ft', variety: 'Certified Seed' },
                { id: 's5', name: 'Kentucky 31 Tall Fescue', brand: 'Pennington', type: 'K-31', coverage: '5000 sq ft', variety: 'Cool Season' },
                { id: 's6', name: 'Perennial Ryegrass Seed', brand: 'Barenbrug', type: 'RPR Technology', coverage: '5000 sq ft', variety: 'Quick Germination' },
                { id: 's7', name: 'Scotts EZ Seed Patch & Repair', brand: 'Scotts', type: 'Mulch Mix', coverage: '225 sq ft', variety: 'All-in-One' },
                { id: 's8', name: 'Zoysia Grass Seed', brand: 'Zenith', type: 'Warm Season', coverage: '2000 sq ft', variety: 'Drought Tolerant' },
                { id: 's9', name: 'Bermuda Grass Seed', brand: 'Outsidepride', type: 'Improved', coverage: '3000 sq ft', variety: 'Southern Lawns' },
                { id: 's10', name: 'Kentucky Bluegrass Mix', brand: 'Jonathan Green', type: 'Premium KBG', coverage: '3000 sq ft', variety: 'Fine Texture' }
            ]
        };
        
        // Treatment Products Database - Organized by Category
        const TREATMENT_PRODUCTS = {
            fertilizer: [
                { id: 'f1', name: 'Scotts Turf Builder Lawn Food', brand: 'Scotts', activeIngredient: '32-0-4', rate: 'Per label', timing: 'Spring/Fall', notes: 'Slow-Release Nitrogen' },
                { id: 'f2', name: 'Milorganite Organic Fertilizer', brand: 'Milorganite', activeIngredient: '6-4-0', rate: 'Per label', timing: 'Any season', notes: 'Organic, Slow-Release' },
                { id: 'f3', name: 'Jonathan Green Green-Up', brand: 'Jonathan Green', activeIngredient: '29-0-3', rate: 'Per label', timing: 'Spring/Fall', notes: 'Professional Grade' },
                { id: 'f4', name: 'Pennington UltraGreen', brand: 'Pennington', activeIngredient: '30-0-4', rate: 'Per label', timing: 'Growing season', notes: 'Nitrogen Stabilized' },
                { id: 'f5', name: 'Other (specify)', brand: 'Various', activeIngredient: '', rate: 'See label', timing: '', notes: 'Custom product' }
            ],
            preemergent: [
                { id: 'pre1', name: 'Prodiamine 65 WDG (Yard Mastery)', brand: 'Yard Mastery', activeIngredient: 'Prodiamine 65%', rate: '0.5 oz per 1,000 sq ft', timing: 'When soil hits 50-55¬∞F', notes: 'Premium WDG formulation' },
                { id: 'pre2', name: 'Barricade 4FL', brand: 'Syngenta', activeIngredient: 'Prodiamine 41.7%', rate: '0.5 fl oz per 1,000 sq ft', timing: 'Early spring & fall', notes: 'Liquid concentrate' },
                { id: 'pre3', name: 'Dimension 2EW', brand: 'Dow', activeIngredient: 'Dithiopyr 23.3%', rate: '0.5 fl oz per 1,000 sq ft', timing: 'Pre & early post-emergent', notes: 'Works on young crabgrass' },
                { id: 'pre4', name: 'Scotts Halts', brand: 'Scotts', activeIngredient: 'Pendimethalin', rate: '2.9 lbs per 1,000 sq ft', timing: 'Early spring', notes: 'Granular, easy application' },
                { id: 'pre5', name: 'Other (specify)', brand: 'Various', activeIngredient: '', rate: 'See label', timing: '', notes: 'Custom product' }
            ],
            postemergent: [
                { id: 'post1', name: 'Tenacity', brand: 'Syngenta', activeIngredient: 'Mesotrione 40%', rate: '0.25 oz per 1,000 sq ft', target: 'Crabgrass, broadleaf weeds', notes: 'Safe for seeding' },
                { id: 'post2', name: 'Ortho Weed B Gon', brand: 'Ortho', activeIngredient: '2,4-D + Quinclorac', rate: 'Per label', target: 'Broadleaf & grassy weeds', notes: 'Ready-to-spray' },
                { id: 'post3', name: 'Speedzone', brand: 'PBI Gordon', activeIngredient: '2,4-D + others', rate: '1.5 fl oz per 1,000 sq ft', target: 'Fast-acting broadleaf', notes: 'Works in cool temps' },
                { id: 'post4', name: 'Quinclorac 75DF', brand: 'Various', activeIngredient: 'Quinclorac 75%', rate: '0.25 oz per 1,000 sq ft', target: 'Crabgrass, clover', notes: 'Selective herbicide' },
                { id: 'post5', name: 'Other (specify)', brand: 'Various', activeIngredient: '', rate: 'See label', target: '', notes: 'Custom product' }
            ],
            fungicide: [
                { id: 'fung1', name: 'Disease Ex (Scotts)', brand: 'Scotts', activeIngredient: 'Azoxystrobin 0.31%', rate: '3 lbs per 1,000 sq ft', target: 'Brown patch, dollar spot', notes: 'Granular, preventative' },
                { id: 'fung2', name: 'Azoxystrobin 0.31G', brand: 'Various', activeIngredient: 'Azoxystrobin 0.31%', rate: '3 lbs per 1,000 sq ft', target: 'Broad spectrum', notes: 'Generic Disease Ex' },
                { id: 'fung3', name: 'Propiconazole 14.3', brand: 'Various', activeIngredient: 'Propiconazole 14.3%', rate: '1 fl oz per 1,000 sq ft', target: 'Systemic fungicide', notes: 'Liquid concentrate' },
                { id: 'fung4', name: 'Heritage G', brand: 'Syngenta', activeIngredient: 'Azoxystrobin 0.5%', rate: '2 lbs per 1,000 sq ft', target: 'Premium fungicide', notes: 'Professional grade' },
                { id: 'fung5', name: 'Other (specify)', brand: 'Various', activeIngredient: '', rate: 'See label', target: '', notes: 'Custom product' }
            ],
            insecticide: [
                { id: 'ins1', name: 'GrubEx (Scotts)', brand: 'Scotts', activeIngredient: 'Chlorantraniliprole', rate: '2.87 lbs per 1,000 sq ft', target: 'Grubs (preventative)', notes: 'Apply late spring/early summer' },
                { id: 'ins2', name: 'BioAdvanced Grub Killer', brand: 'BioAdvanced', activeIngredient: 'Imidacloprid', rate: '3 lbs per 1,000 sq ft', target: 'Grubs, mole crickets', notes: 'Season-long control' },
                { id: 'ins3', name: 'Dylox 6.2G', brand: 'Bayer', activeIngredient: 'Trichlorfon 6.2%', rate: '3 lbs per 1,000 sq ft', target: 'Active grubs', notes: '24-hour curative' },
                { id: 'ins4', name: 'Bifenthrin 0.2G', brand: 'Various', activeIngredient: 'Bifenthrin 0.2%', rate: '2.3 lbs per 1,000 sq ft', target: 'Surface insects', notes: 'Ants, chinch bugs' },
                { id: 'ins5', name: 'Other (specify)', brand: 'Various', activeIngredient: '', rate: 'See label', target: '', notes: 'Custom product' }
            ],
            soilAmendment: [
                { id: 'soil1', name: 'Pelletized Lime', brand: 'Various', type: 'pH Increase', rate: '50 lbs per 1,000 sq ft', effect: 'Raises pH by ~0.5', notes: 'For acidic soils (pH <6.5)' },
                { id: 'soil2', name: 'Elemental Sulfur', brand: 'Various', type: 'pH Decrease', rate: '5-10 lbs per 1,000 sq ft', effect: 'Lowers pH by ~0.5', notes: 'For alkaline soils (pH >7.0)' },
                { id: 'soil3', name: 'Gypsum', brand: 'Various', type: 'Soil Structure', rate: '40 lbs per 1,000 sq ft', effect: 'Improves clay soil', notes: 'Does not change pH' },
                { id: 'soil4', name: 'Humic Acid', brand: 'Various', type: 'Soil Health', rate: '3 fl oz per 1,000 sq ft', effect: 'Improves nutrient uptake', notes: 'Liquid application' },
                { id: 'soil5', name: 'Other (specify)', brand: 'Various', type: '', rate: 'See label', effect: '', notes: 'Custom product' }
            ]
        };
        
        // Treatment category definitions
        const TREATMENT_CATEGORIES = {
            fertilizer: { label: 'Fertilizer', icon: 'üåæ', description: 'NPK nutrients for growth' },
            preemergent: { label: 'Pre-Emergent', icon: 'üõ°Ô∏è', description: 'Prevent weed seeds from germinating' },
            postemergent: { label: 'Post-Emergent', icon: 'üåø', description: 'Kill existing weeds' },
            fungicide: { label: 'Fungicide', icon: 'üçÑ', description: 'Prevent or treat lawn diseases' },
            insecticide: { label: 'Insecticide', icon: 'üêõ', description: 'Control grubs and insects' },
            soilAmendment: { label: 'Soil Amendment', icon: 'üåç', description: 'Adjust pH or improve soil' }
        };
        
        // Activity type definitions with their custom fields
        const ACTIVITY_TYPES = {
            mowing: {
                name: 'Mowing Lawn',
                icon: 'üå±',
                color: 'bg-[#367C2B]',
                fields: [
                    { 
                        name: 'mowerUsed', 
                        label: 'Mower Model', 
                        type: 'product-select', 
                        productType: 'mowers',
                        placeholder: 'Select your mower...'
                    },
                    { name: 'mowHeight', label: 'Mow Height', type: 'select', options: ['1.5"', '2"', '2.5"', '3"', '3.5"', '4"', '4.5"'] },
                    { name: 'clippings', label: 'Clippings', type: 'select', options: ['Bagging', 'Mulching', 'Side Discharge'] },
                    { name: 'duration', label: 'Duration (minutes)', type: 'number', placeholder: '45' }
                ]
            },
            fertilizer: {
                name: 'Fertilizer & Treatments',
                icon: 'üåæ',
                color: 'bg-[#367C2B]',
                fields: [
                    {
                        name: 'category',
                        label: 'Treatment Category',
                        type: 'treatment-category',
                        required: true
                    },
                    { 
                        name: 'product', 
                        label: 'Product', 
                        type: 'treatment-product',
                        placeholder: 'Select product...',
                        required: true
                    },
                    { 
                        name: 'spreader', 
                        label: 'Spreader/Applicator Used (Optional)', 
                        type: 'product-select', 
                        productType: 'spreaders',
                        placeholder: 'Select spreader (optional)...'
                    },
                    { 
                        name: 'applicationRate', 
                        label: 'Application Rate', 
                        type: 'text', 
                        placeholder: 'e.g., 0.5 oz per 1,000 sq ft'
                    },
                    { 
                        name: 'coverage', 
                        label: 'Coverage Area (sq ft)', 
                        type: 'number', 
                        placeholder: '5000',
                        min: 1,
                        max: 100000
                    },
                    { 
                        name: 'amountUsed', 
                        label: 'Total Amount Used', 
                        type: 'text', 
                        placeholder: 'e.g., 2.5 oz or 15 lbs'
                    }
                ]
            },
            trimming: {
                name: 'Trimming Beds',
                icon: '‚úÇÔ∏è',
                color: 'bg-[#367C2B]',
                fields: [
                    { name: 'areas', label: 'Areas Trimmed', type: 'text', placeholder: 'e.g., Front beds, side yard' },
                    { name: 'toolUsed', label: 'Tool Used', type: 'select', options: ['String Trimmer', 'Edger', 'Hedge Trimmer', 'Hand Shears'] },
                    { name: 'duration', label: 'Duration (minutes)', type: 'number', placeholder: '30' }
                ]
            },
            watering: {
                name: 'Watering',
                icon: 'üíß',
                color: 'bg-[#367C2B]',
                fields: [
                    { name: 'method', label: 'Method', type: 'select', options: ['Sprinkler System', 'Hose', 'Hand Watering', 'Rain'] },
                    { name: 'duration', label: 'Duration (minutes)', type: 'number', placeholder: '30' },
                    { name: 'areas', label: 'Areas Watered', type: 'text', placeholder: 'e.g., Full lawn' }
                ]
            },
            seeding: {
                name: 'Seeding/Overseeding',
                icon: 'üå±',
                color: 'bg-[#367C2B]',
                fields: [
                    { 
                        name: 'product', 
                        label: 'Grass Seed Product', 
                        type: 'product-select', 
                        productType: 'seeds',
                        placeholder: 'Select seed...'
                    },
                    { 
                        name: 'spreader', 
                        label: 'Spreader Used', 
                        type: 'product-select', 
                        productType: 'spreaders',
                        placeholder: 'Select spreader...'
                    },
                    { name: 'spreaderSetting', label: 'Spreader Setting', type: 'text', placeholder: 'e.g., Setting 6 or J' },
                    { name: 'applicationRate', label: 'Application Rate', type: 'text', placeholder: 'e.g., 5 lbs per 1000 sq ft' },
                    { name: 'amountUsed', label: 'Amount Used (lbs)', type: 'number', placeholder: '25' },
                    { name: 'areas', label: 'Areas Seeded', type: 'text', placeholder: 'e.g., Bare spots in backyard' }
                ]
            },
            aeration: {
                name: 'Aeration',
                icon: 'üîß',
                color: 'bg-[#367C2B]',
                fields: [
                    { name: 'method', label: 'Method', type: 'select', options: ['Core Aeration', 'Spike Aeration', 'Liquid Aeration'] },
                    { name: 'equipment', label: 'Equipment', type: 'text', placeholder: 'e.g., Rental aerator' },
                    { name: 'coverage', label: 'Coverage Area (sq ft)', type: 'number', placeholder: '5000' }
                ]
            },
            maintenance: {
                name: 'Equipment Maintenance',
                icon: 'üîß',
                color: 'bg-[#367C2B]',
                fields: [
                    { name: 'equipmentType', label: 'Equipment Type', type: 'select', options: ['Mower', 'Trimmer', 'Edger', 'Blower', 'Spreader', 'Aerator', 'Other'] },
                    { name: 'maintenanceType', label: 'Maintenance Performed', type: 'select', options: ['Oil Change', 'Blade Sharpening', 'Spark Plug', 'Air Filter', 'Cleaning', 'General Service', 'Repair', 'Winterization'] },
                    { name: 'equipmentModel', label: 'Equipment Model (Optional)', type: 'text', placeholder: 'e.g., Honda HRX217' },
                    { name: 'partsReplaced', label: 'Parts Replaced (Optional)', type: 'text', placeholder: 'e.g., Air filter, spark plug' },
                    { name: 'cost', label: 'Cost (Optional)', type: 'number', placeholder: '25' },
                    { name: 'duration', label: 'Duration (minutes)', type: 'number', placeholder: '30' }
                ]
            }
        };

        function LawnCareTracker() {
            const [activities, setActivities] = useState([]);
            const [view, setView] = useState(null);
            const [selectedActivityType, setSelectedActivityType] = useState(null);
            const [formData, setFormData] = useState({});
            const [weather, setWeather] = useState(null);
            const [weatherLoading, setWeatherLoading] = useState(true);
            const [equipment, setEquipment] = useState([]);
            const [lawnProfile, setLawnProfile] = useState(null);

            // Load activities from localStorage on mount
            useEffect(() => {
                const stored = localStorage.getItem('lawnCareActivities');
                if (stored) {
                    setActivities(JSON.parse(stored));
                }
                
                const storedEquipment = localStorage.getItem('lawnCareEquipment');
                if (storedEquipment) {
                    setEquipment(JSON.parse(storedEquipment));
                }
                
                const storedProfile = localStorage.getItem('lawnProfile');
                if (storedProfile) {
                    setLawnProfile(JSON.parse(storedProfile));
                }
                
                fetchWeatherData();
            }, []);

            const fetchWeatherData = async () => {
                try {
                    setWeatherLoading(true);
                    
                    const lat = 40.1014;
                    const lon = -83.0235;
                    
                    const response = await fetch(
                        `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m,precipitation&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&temperature_unit=fahrenheit&wind_speed_unit=mph&precipitation_unit=inch&timezone=auto&past_days=7`
                    );
                    
                    const data = await response.json();
                    
                    const airTemp = data.current.temperature_2m;
                    const soilTemp = Math.round(airTemp - 7);
                    
                    let weeklyRainfall = 0;
                    if (data.daily && data.daily.precipitation_sum) {
                        weeklyRainfall = data.daily.precipitation_sum.reduce((sum, val) => sum + val, 0);
                        weeklyRainfall = Math.round(weeklyRainfall * 10) / 10;
                    }
                    
                    setWeather({
                        temperature: Math.round(airTemp),
                        soilTemp: soilTemp,
                        humidity: data.current.relative_humidity_2m,
                        windSpeed: Math.round(data.current.wind_speed_10m),
                        weatherCode: data.current.weather_code,
                        highTemp: Math.round(data.daily.temperature_2m_max[0]),
                        lowTemp: Math.round(data.daily.temperature_2m_min[0]),
                        rainfall: weeklyRainfall,
                        location: 'Columbus, OH'
                    });
                    
                    setWeatherLoading(false);
                } catch (error) {
                    console.error('Weather fetch error:', error);
                    setWeatherLoading(false);
                }
            };

            useEffect(() => {
                localStorage.setItem('lawnCareActivities', JSON.stringify(activities));
            }, [activities]);

            const addActivity = (activityData) => {
                const newActivity = {
                    id: Date.now(),
                    type: selectedActivityType,
                    date: activityData.date,
                    notes: activityData.notes,
                    data: activityData.data,
                    equipmentUsed: activityData.equipmentUsed || null,
                    hoursLogged: activityData.hoursLogged || null,
                    createdAt: new Date().toISOString()
                };
                
                const updatedActivities = [...activities, newActivity];
                setActivities(updatedActivities);
                
                alert('‚úÖ Activity saved successfully!');
                
                setView(null);
                setSelectedActivityType(null);
                setFormData({});
            };

            const deleteActivity = (id) => {
                if (confirm('Are you sure you want to delete this activity?')) {
                    setActivities(activities.filter(a => a.id !== id));
                }
            };

            const WeatherSnapshot = () => {
                if (weatherLoading) {
                    return (
                        <div className="bg-white rounded-lg shadow p-6 mb-6 border border-gray-200">
                            <div className="text-gray-600 text-center">
                                <div className="animate-pulse">Loading weather data...</div>
                            </div>
                        </div>
                    );
                }

                if (!weather) return null;

                let recommendation = '';
                if (weather.soilTemp < 50) {
                    recommendation = '‚ùÑÔ∏è Soil too cold for most activities. Wait for warmer weather.';
                } else if (weather.soilTemp >= 50 && weather.soilTemp <= 65) {
                    recommendation = 'üå± Good conditions for cool-season grass care and pre-emergent application.';
                } else if (weather.soilTemp > 65 && weather.soilTemp <= 85) {
                    recommendation = '‚òÄÔ∏è Ideal growing conditions. Good time for fertilizing and seeding.';
                } else {
                    recommendation = 'üî• Very warm. Focus on watering and avoid stress-inducing activities.';
                }

                return (
                    <div className="mb-6">
                        <div className="bg-white rounded-xl shadow-lg border-2 border-[#367C2B]/20 p-4 mb-3">
                            <h3 className="text-xs font-bold text-[#367C2B] uppercase tracking-wider mb-3">Current Conditions - {weather.location}</h3>
                            <div className="grid grid-cols-2 gap-3">
                                <div className="flex flex-col items-center justify-center border-r-2 border-[#367C2B]/20 p-2">
                                    <div className="text-3xl font-bold text-[#367C2B]">{weather.temperature}¬∞</div>
                                    <div className="text-xs text-gray-600 mt-1">Air Temp</div>
                                    <div className="text-xs text-gray-500">H: {weather.highTemp}¬∞ L: {weather.lowTemp}¬∞</div>
                                </div>
                                
                                <div className="flex flex-col items-center justify-center p-2">
                                    <div className="text-3xl font-bold text-[#367C2B]">{weather.soilTemp}¬∞</div>
                                    <div className="text-xs text-gray-600 mt-1">Soil Temp</div>
                                    <div className="text-xs text-gray-500">at 4" depth</div>
                                </div>
                            </div>
                            
                            <div className="grid grid-cols-2 gap-3 mt-3 pt-3 border-t-2 border-gray-100">
                                <div className="text-center">
                                    <div className="text-xl font-bold text-[#367C2B]">{weather.humidity}%</div>
                                    <div className="text-xs text-gray-600">Humidity</div>
                                </div>
                                <div className="text-center">
                                    <div className="text-xl font-bold text-[#367C2B]">{weather.rainfall}"</div>
                                    <div className="text-xs text-gray-600">Weekly Rain</div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-[#e8f5e9] rounded-xl p-4 border-l-4 border-[#4a7c2c]">
                            <div className="font-bold text-sm text-[#367C2B] mb-1">Current Recommendation:</div>
                            <div className="text-sm text-gray-700">{recommendation}</div>
                        </div>
                        
                        {activities.length > 0 && (
                            <div className="bg-white rounded-xl shadow-lg border-2 border-[#367C2B]/30 p-4 mt-3">
                                <h3 className="text-xs font-bold text-[#367C2B] uppercase tracking-wider mb-3">Last Activity</h3>
                                <div className="flex items-center gap-3">
                                    <div className="text-4xl">{ACTIVITY_TYPES[activities[activities.length - 1].type].icon}</div>
                                    <div className="flex-1">
                                        <div className="text-base font-bold text-[#367C2B]">
                                            {ACTIVITY_TYPES[activities[activities.length - 1].type].name}
                                        </div>
                                        <div className="text-xs text-gray-600 mt-1">
                                            {(() => {
                                                const lastActivity = activities[activities.length - 1];
                                                const daysSince = Math.floor((new Date() - new Date(lastActivity.date)) / (1000 * 60 * 60 * 24));
                                                return daysSince === 0 ? 'Today' : daysSince === 1 ? 'Yesterday' : `${daysSince} days ago`;
                                            })()}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            const ActivitySelector = () => {
                return (
                    <div>
                        <h2 className="text-xl font-bold mb-4 text-gray-900">Select Activity Type</h2>
                        <div className="grid grid-cols-2 gap-3">
                            {Object.entries(ACTIVITY_TYPES).map(([key, type]) => (
                                <button
                                    key={key}
                                    onClick={() => setSelectedActivityType(key)}
                                    className="bg-white border-2 border-[#367C2B]/30 hover:border-[#367C2B] p-4 rounded-xl shadow-md hover:shadow-xl transition-all flex items-center gap-3 min-h-[100px]"
                                >
                                    <div className="text-4xl">{type.icon}</div>
                                    <div className="text-sm font-bold leading-tight text-left flex-1 text-[#367C2B]">
                                        {type.name}
                                    </div>
                                </button>
                            ))}
                        </div>
                        <button
                            onClick={() => setView(null)}
                            className="mt-4 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium"
                        >
                            Cancel
                        </button>
                    </div>
                );
            };

            const ActivityForm = () => {
                const activityType = ACTIVITY_TYPES[selectedActivityType];
                const [localFormData, setLocalFormData] = useState({
                    date: new Date().toISOString().split('T')[0],
                    notes: '',
                    data: {},
                    equipmentUsed: null,
                    hoursLogged: null
                });
                const [selectedProducts, setSelectedProducts] = useState({});

                const handleSubmit = (e) => {
                    e.preventDefault();
                    addActivity(localFormData);
                };

                return (
                    <div>
                        <h2 className="text-2xl font-bold mb-6 text-gray-900 flex items-center gap-3">
                            <span className="text-4xl">{activityType.icon}</span>
                            {activityType.name}
                        </h2>
                        
                        <form onSubmit={handleSubmit} className="bg-white rounded-lg shadow-lg p-6 max-w-3xl border border-gray-200">
                            <div className="mb-4">
                                <label className="block text-sm font-semibold mb-2 text-gray-700">Date</label>
                                <input
                                    type="date"
                                    required
                                    max={new Date().toISOString().split('T')[0]}
                                    value={localFormData.date}
                                    onChange={(e) => setLocalFormData({...localFormData, date: e.target.value})}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#367C2B] focus:border-transparent"
                                />
                            </div>

                            {activityType.fields.map(field => (
                                <div key={field.name} className="mb-4">
                                    <label className="block text-sm font-semibold mb-2 text-gray-700">
                                        {field.label}
                                        {field.required && <span className="text-red-600 ml-1">*</span>}
                                    </label>
                                    
                                    {field.type === 'treatment-category' ? (
                                        <div className="grid grid-cols-2 gap-3">
                                            {Object.entries(TREATMENT_CATEGORIES).map(([key, cat]) => (
                                                <button
                                                    key={key}
                                                    type="button"
                                                    onClick={() => {
                                                        setLocalFormData({
                                                            ...localFormData,
                                                            data: {
                                                                ...localFormData.data,
                                                                category: key,
                                                                product: ''
                                                            }
                                                        });
                                                    }}
                                                    className={`p-3 rounded-lg border-2 font-semibold transition text-sm ${
                                                        localFormData.data.category === key
                                                            ? 'bg-[#367C2B] text-white border-[#367C2B]'
                                                            : 'bg-white text-gray-700 border-gray-200 hover:border-[#367C2B]'
                                                    }`}
                                                >
                                                    <div className="text-xl mb-1">{cat.icon}</div>
                                                    <div>{cat.label}</div>
                                                </button>
                                            ))}
                                        </div>
                                    ) : field.type === 'treatment-product' ? (
                                        <div>
                                            {localFormData.data.category ? (
                                                <select
                                                    value={localFormData.data.productId || ''}
                                                    onChange={(e) => {
                                                        const productId = e.target.value;
                                                        const categoryProducts = TREATMENT_PRODUCTS[localFormData.data.category] || [];
                                                        const product = categoryProducts.find(p => p.id === productId);
                                                        setLocalFormData({
                                                            ...localFormData,
                                                            data: {
                                                                ...localFormData.data, 
                                                                [field.name]: product ? product.name : '',
                                                                productId: productId
                                                            }
                                                        });
                                                    }}
                                                    required={field.required}
                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#367C2B] focus:border-transparent"
                                                >
                                                    <option value="">Select product...</option>
                                                    {(TREATMENT_PRODUCTS[localFormData.data.category] || []).map(product => (
                                                        <option key={product.id} value={product.id}>
                                                            {product.name}
                                                        </option>
                                                    ))}
                                                </select>
                                            ) : (
                                                <div className="p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800">
                                                    ‚ö†Ô∏è Please select a treatment category first
                                                </div>
                                            )}
                                        </div>
                                    ) : field.type === 'select' ? (
                                        <select
                                            value={localFormData.data[field.name] || ''}
                                            onChange={(e) => setLocalFormData({
                                                ...localFormData,
                                                data: {...localFormData.data, [field.name]: e.target.value}
                                            })}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#367C2B] focus:border-transparent"
                                        >
                                            <option value="">Select...</option>
                                            {field.options.map(opt => (
                                                <option key={opt} value={opt}>{opt}</option>
                                            ))}
                                        </select>
                                    ) : (
                                        <input
                                            type={field.type}
                                            placeholder={field.placeholder}
                                            value={localFormData.data[field.name] || ''}
                                            onChange={(e) => setLocalFormData({
                                                ...localFormData,
                                                data: {...localFormData.data, [field.name]: e.target.value}
                                            })}
                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#367C2B] focus:border-transparent"
                                        />
                                    )}
                                </div>
                            ))}

                            <div className="mb-4">
                                <label className="block text-sm font-semibold mb-2 text-gray-700">Notes (Optional)</label>
                                <textarea
                                    value={localFormData.notes}
                                    onChange={(e) => setLocalFormData({...localFormData, notes: e.target.value})}
                                    placeholder="Any additional notes..."
                                    rows="3"
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#367C2B] focus:border-transparent"
                                />
                            </div>

                            <div className="flex gap-4">
                                <button
                                    type="submit"
                                    className="flex-1 px-6 py-3 bg-[#367C2B] text-white rounded-lg font-semibold hover:bg-[#2d6323] transition"
                                >
                                    Save Activity
                                </button>
                                <button
                                    type="button"
                                    onClick={() => {
                                        setSelectedActivityType(null);
                                        setView(null);
                                    }}
                                    className="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition"
                                >
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                );
            };

            const HistoryView = () => {
                const sortedActivities = [...activities].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );

                return (
                    <div>
                        <h2 className="text-2xl font-bold mb-6">Activity History</h2>
                        
                        {sortedActivities.length === 0 ? (
                            <div className="bg-white rounded-lg shadow p-8 text-center text-gray-500">
                                No activities logged yet. Start by adding your first activity!
                            </div>
                        ) : (
                            <div className="space-y-4">
                                {sortedActivities.map(activity => {
                                    const activityType = ACTIVITY_TYPES[activity.type];
                                    return (
                                        <div key={activity.id} className="bg-white rounded-lg shadow-lg p-6">
                                            <div className="flex items-start justify-between">
                                                <div className="flex items-start gap-4 flex-1">
                                                    <div className="text-4xl">{activityType.icon}</div>
                                                    <div className="flex-1">
                                                        <h3 className="text-xl font-bold mb-1">{activityType.name}</h3>
                                                        <p className="text-gray-600 mb-3">
                                                            {new Date(activity.date).toLocaleDateString('en-US', { 
                                                                weekday: 'long', 
                                                                year: 'numeric', 
                                                                month: 'long', 
                                                                day: 'numeric' 
                                                            })}
                                                        </p>
                                                        
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2 mb-2">
                                                            {Object.entries(activity.data).map(([key, value]) => {
                                                                if (key === 'productId' || !value || value === '') {
                                                                    return null;
                                                                }
                                                                
                                                                const field = activityType.fields.find(f => f.name === key);
                                                                const label = field ? field.label : key;
                                                                
                                                                return (
                                                                    <div key={key} className="text-sm">
                                                                        <span className="font-semibold">{label}:</span>{' '}
                                                                        <span className="text-gray-700">{value}</span>
                                                                    </div>
                                                                );
                                                            })}
                                                        </div>
                                                        
                                                        {activity.notes && (
                                                            <div className="mt-2 p-2 bg-gray-50 rounded text-sm">
                                                                <span className="font-semibold">Notes:</span> {activity.notes}
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                                <button
                                                    onClick={() => deleteActivity(activity.id)}
                                                    className="text-red-500 hover:text-red-700 px-3 py-1"
                                                >
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white shadow-md sticky top-0 z-50">
                        <div className="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
                            <button 
                                onClick={() => {
                                    setView(null);
                                    setSelectedActivityType(null);
                                }}
                                className="flex items-center hover:opacity-80 transition"
                            >
                                <div className="text-2xl font-bold text-[#367C2B]">üå± Lawn Care Tracker</div>
                            </button>
                            
                            <button 
                                onClick={() => setView(view === 'menu' ? null : 'menu')}
                                className="p-2 rounded-lg hover:bg-gray-100 transition"
                            >
                                <svg className="w-8 h-8 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                                </svg>
                            </button>
                        </div>
                        
                        {view === 'menu' && (
                            <div className="border-t border-gray-200 bg-white shadow-lg">
                                <div className="max-w-5xl mx-auto px-4 py-2">
                                    <button
                                        onClick={() => {
                                            setView('add');
                                            setSelectedActivityType(null);
                                        }}
                                        className="w-full text-left px-4 py-3 rounded-lg hover:bg-[#367C2B]/10 transition flex items-center gap-3"
                                    >
                                        <span className="text-2xl">‚ûï</span>
                                        <span className="text-lg font-semibold text-gray-700">Add Activity</span>
                                    </button>
                                    <button
                                        onClick={() => { setView('history'); }}
                                        className="w-full text-left px-4 py-3 rounded-lg hover:bg-[#367C2B]/10 transition flex items-center gap-3"
                                    >
                                        <span className="text-2xl">üìã</span>
                                        <span className="text-lg font-semibold text-gray-700">History</span>
                                    </button>
                                </div>
                            </div>
                        )}
                    </header>

                    {!view && (
                        <div className="max-w-5xl mx-auto p-2 md:p-3">
                            <WeatherSnapshot />
                        </div>
                    )}

                    {view === 'add' && (
                        <div className="max-w-5xl mx-auto p-2 md:p-3">
                            <div className="mb-4">
                                <button 
                                    onClick={() => {
                                        setView(null);
                                        setSelectedActivityType(null);
                                    }}
                                    className="text-[#367C2B] hover:text-[#2d6323] font-semibold flex items-center gap-2"
                                >
                                    ‚Üê Back to Home
                                </button>
                            </div>
                            {!selectedActivityType && <ActivitySelector />}
                            {selectedActivityType && <ActivityForm />}
                        </div>
                    )}

                    {view === 'history' && (
                        <div className="max-w-5xl mx-auto p-2 md:p-3">
                            <div className="mb-4">
                                <button 
                                    onClick={() => setView(null)}
                                    className="text-[#367C2B] hover:text-[#2d6323] font-semibold flex items-center gap-2"
                                >
                                    ‚Üê Back to Home
                                </button>
                            </div>
                            <HistoryView />
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<LawnCareTracker />, document.getElementById('root'));
    </script>
</body>
</html>
